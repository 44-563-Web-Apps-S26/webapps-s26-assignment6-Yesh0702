<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Villain Guessing Game</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding: 20px; background-color: #f8f9fa; }
        .game-container { max-width: 600px; margin: auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        #treeDisplay { cursor: pointer; border: 3px solid #dee2e6; border-radius: 8px; transition: transform 0.2s; }
        #treeDisplay:hover { transform: scale(1.05); }
    </style>
</head>
<body>

<div class="container game-container">
    <h1 class="text-primary border-bottom pb-2">Villains by Yeshwanth Reddy Kottam</h1>

    <h2 class="h4 mt-4 text-secondary">Catch the Villain</h2>

    <form class="mb-4">
        <div class="mb-3">
            <label for="secret_villain" class="form-label">Funny Man (Secret)</label>
            <input type="password" id="secret_villain" class="form-control" value="Joker">
        </div>

        <div class="mb-3">
            <label for="villain_guess" class="form-label">Guess the villain</label>
            <input type="text" id="villain_guess" class="form-control" placeholder="Enter your guess">
        </div>

        <input type="button" id="gameButton" class="btn btn-primary" onclick="checkVillain()" value="Check the guess">
    </form>

    <div id="result_counts" class="alert alert-info">
        Caught: 0 | Got Away: 0
    </div>

    <hr>

    <div class="text-center mt-4">
        <p class="text-muted">Click the image to cycle through trees:</p>
        <div id="image_container">
            <img id="treeDisplay" 
                 src="tree1.jpg" 
                 alt="Trees" 
                 width="150" 
                 height="150" 
                 onclick="updatePic()">
        </div>
    </div>
</div>

<script> 
    // Global variables initialized to 0
    var caught = 0;
    var gotAway = 0;

    // Part 3.7: Main game function
    function checkVillain() {
        let secret = document.getElementById("secret_villain").value;
        let guess = document.getElementById("villain_guess").value;
        let out = document.getElementById("result_counts");

        if (secret === guess) {
            caught = caught + 1;
            alert("You caught them");
        } else {
            gotAway = gotAway + 1;
            alert("Maybe next time");
        }

        // Bonus: Replace onclick if wrong guesses > 10
        if (gotAway > 10) {
            let btn = document.getElementById("gameButton");
            // Setting the onclick property to the new function call
            btn.setAttribute("onclick", "gameOver()");
            btn.className = "btn btn-danger"; // Visual cue for game over
            out.className = "alert alert-danger";
        }

        out.innerHTML = "Caught: " + caught + " | Got Away: " + gotAway;
    }

    // Bonus: Function for when too many guesses are made
    function gameOver() {
        alert("Sorry, too many wrong guesses."); //
    }

    // Part 4.4 & 4.5: Image cycling logic
    var usePic = 1;
    function updatePic() {
        let img = document.getElementById("treeDisplay");
        switch(usePic) {
            case 1:
                img.src = "tree1.jpg"; 
                usePic = 2;            
                break;                 
            case 2:
                img.src = "tree2.jpg";
                usePic = 3;
                break;
            case 3:
                img.src = "tree3.jpg";
                usePic = 1;            
                break;
        }
    }
</script>

</body>
</html>